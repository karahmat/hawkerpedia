<html lang="en">
    <%- include('./partials/head.ejs') %>
<body>

    <%- include('./partials/header.ejs') %>

    <div class="content">
        <div class="welcome">
            
            <div class="welcometext">
                <h1>Welcome to the Hawkerpedia</h1>                
            </div>

        </div>
      

        <div class="productContainer">
            <div class="navbar-mini">
                <ul>
                    <li class="show-all">Show All</li>
                    <% navigation.forEach( letter => { %>
                        <li class="navbarmini-item"><%= letter %></li>
                    <% }) %>
              
                </ul>
            </div>

            <div class="index-hawkerList">
                <h2>List of Hawker Centres</h2>
                <ul id="hawkercentresList">
                    <% data.forEach( (item) => { %>
                        <li class="hawkercentreItem"><a href="/hawkercentre?name=<%= item %>"><%= item %></a></li>
                    <% }) %>
                </ul>                       
            </div>            
            
        </div>
    </div>  
    
    <script>
        const mininavbar = document.querySelectorAll('.navbarmini-item');
        const hawkerList = document.querySelectorAll('.hawkercentreItem');
        const hawkercentresList = document.querySelector('#hawkercentresList');
        const showAll = document.querySelector('.show-all');
        //console.log(hawkerList);
        for (const navLetter of mininavbar ) {
            navLetter.addEventListener('click', () => {
                hawkercentresList.innerHTML = '';
                //console.log(navLetter.textContent);
                const letter = navLetter.textContent;
                const listToBeShown = [];
                for (const hawkerItem of hawkerList) {
                    if (hawkerItem.textContent.charAt(0) === letter) {
                        listToBeShown.push(hawkerItem.textContent);
                    }
                }
                listToBeShown.forEach( (item) => {
                    const listItem  = `<li class="hawkercentreItem"><a href="/hawkercentre?name=${item}">${item}</a></li>`
                    hawkercentresList.innerHTML += listItem;
                }); 
            }) 
        }

        showAll.addEventListener('click', () => {
            hawkercentresList.innerHTML = '';

           for (const hawkerItem of hawkerList ) {
               const eachHawkerCentre = `<li class="hawkercentreItem"><a href="/hawkercentre?name=${hawkerItem.textContent}">${hawkerItem.textContent}</a></li>`
               hawkercentresList.innerHTML += eachHawkerCentre;
           }
        });
        
    </script>
    
</body>
</html>